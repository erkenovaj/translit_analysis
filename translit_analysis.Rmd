---
title: "Анализ использования транслитерации английских слов в русскоязычных онлайн-пространствах"
output: html_notebook
author: Эркенова Джамиля
---
**Репозиторий в github:** https://github.com/erkenovaj/translit_analysis

**Введение** 
В интернет пространствах можно заметить повсеместное использование транслитерцаии. Она может быть использована в ожидаемых контекстах, например, при указании англоязычных терминов или названий. Однако часто транслитерированные выражения используются в качестве вводных слов, имея при этом распространенные аналоги на русском языке. К тому же, можно выделить набор транслитерированных выражений, которые являются заимствованиями из англоязычной интернет-культуры. Целью данной работы является исследование фразеологичности транслитерированных выражений, а также их расположения в контексте фраз.

Гипотезы:
1. Транслитерированные выражения фразеологичны, то есть есть транслитерированные выражения, которые повторяются в онлайн-пространствах чаще, чем можно считать случайным.
2. Русские слова часто подводят к транслитерированным выражениям, которые играют кульминационную роль во фразах. То есть, транслитерированные выражения статистически значимо чаще появляются в конце фразы.
3. Многословные транслитерированные выражения одинаково часто появляются в начале фраз и после существительных.  

**Описание исходных данных**
Данные были собраны из крупных публичных чатов различной направленности в Telegram. В том числе были рассмотрены IT-чат, чат русскоязычного сообщества англоязычных дебатов и чат фанатов Бродвея для повседневного общения. Демографию этих чатов состоавляют молодые люди 18-35 лет с хорошим знанием английского языка. Так как специфика каждого чата требует постоянного взаимодействия с англоязычными ресурсами, их участники часто включают английские выражения в свою речь.

С импользованием морфологического анализатора PyMorphy были выявлены транслитерированные выражения и части речи слов до и после них.

Размер датасета: 870 строк. 

Переменные:
text -  Текст, 
translit - Транслитерированное выражение в тексте, 
pos_bef1 - Часть речи слова перед выражением, если слова нет - NA,
pos_bef2 - Часть речи второго слова перед выражением, если слова нет - NA,
pos_bef3 - Часть речи третьего слова перед выражением, если слова нет - NA,
pos_aft1 - Часть речи слова после выражения, если слова нет - NA,
pos_aft2 - Часть речи второго слова после выражения, если слова нет - NA,
pos_aft3 - Часть речи третьего слова после выражения, если слова нет - NA.

**Описательная статистика распределений в данных и визуализации**
.
```{r}
library(tidyverse)
data <- read_csv('final_project_data_Erkenova1.csv', locale = readr::locale(encoding = "Windows-1251"), show_col_types = FALSE)
```
```{r}
library(tidyr)
data = subset(data, select = -c(1) )
data <- data %>% drop_na(text, translit)
data
```
Посмотрим на частоту, с которой встречаются уникальные транслитерированные выражения:

```{r}
freq = table(data$translit)
as.data.frame(sort(freq, decreasing = TRUE))
as.data.frame(sort(prop.table(freq * 100), decreasing = TRUE))
```
Можно заметить, что некоторые выражения имеют большие частоты, чем другие. Например, "лоуки" занимает 7% всех транслитерированных выражений в датасете, при том что всего имеется 315 уникальных выражений.

Рассмотрим число отсутствующих значений в датасете. Важно отметить, что NA в pos_bef1 означает, что транслитерированное выражение находится в начале фразы, а pos_aft1 - что в конце. Так, из таблицы ниже можно заметить, что транслитерированное выражение бывает в конце фразы чаще, чем в начале. В дальнейшем это утверждение будет проверено, используя статистические методы.

Из таблицы ниже видно, что почти в 60% случаях число слов слева или справа от транслитерированного выражения не превышает трех. Это связано с тем, что сообщения в чатах чаще достаточно короткие.

```{r}
print('Number of NaNs per column:')
colSums(is.na(data))
504/847 #left
493/847 #right
```

Посмотрим на частоту появляения различных частей речей слева и справа от транслитерированных выражений. 
```{r}
pos_data = subset(data, select = -c(1, 2) )
for (i in colnames(pos_data)) {
    plot <- 
      pos_data %>%
      ggplot(aes(x = .data[[i]])) + geom_bar() + labs(y = "Frequency", x = i)
    print(plot)
}

```
Чаще всего во всех позициях встречаются NA, то есть нет слов слева или справа. Это  следствие коротких сообщений, транслитерированные выражения могут часто находиться в начале или конце сообщения, могут занимать большую часть фразы и не иметь больше одного-двух слов до или после.

Следующими по частоте являются имена существительные. В некоторых источниках указывается, что следующая по частоте часть речи после имени существительного - глагол. На рассматриваемом датасете данная тенденция не всегда подтверждается. Например, местоимения следуют после транслитерированных выражений чаще, чем глаголы. Это может обосновываться спецификой данных или недостаточным объемом датасета.

Выше рассматривались данные, включая транслитерированные выражения, состоящие из одного слова. Имеет смысл отдельно рассмотреть выражения, состоящие из нескольких слов, так как они с большей вероятностью могут содержать в себе самостоятельную мысль.

Ниже можно заметить, что среди длинных выражений фразеологичность менее выражена. Так, среди 266 уникальных выражений только 4 встречаются чаще, чем в 1% от всего датасета. При этом самое частое выражение "ай гесс" встречается почти в 12% всех фраз. 

```{r}
require(stringr)
phrase_data = data[str_count(data$translit, "\\S+") >= 2, ]
phrase_data

as.data.frame(sort(table(phrase_data$translit), decreasing = TRUE))
as.data.frame(sort(prop.table(table(phrase_data$translit) * 100), decreasing = TRUE))
```
Посмотрим на частоту появления частей речи в различных позициях для транслитерированных выражений, состоящих из нескольких слов.

Ниже можно заметить, что подобные выражения появляются после существительных довольно часто. Можно предположить, что это происходит с той же вероятностью, с которой многословное транслитерированное выражение находится в начале фразы. Данное утверждение будет проверено дальше.

Имена существительные в целом имеют большие частоты по всем позициям, чем они имели в случае, когда учитывались односложные транслитерированные выражения. 

```{r}
phrase_pos_data <- subset(phrase_data, select = -c(1, 2) )
for (i in colnames(phrase_pos_data)) {
    plot <- 
      phrase_pos_data %>%
      ggplot(aes(x = .data[[i]])) + geom_bar() + labs(y = "Frequency", x = i)
    print(plot)
}
```
В ходе анализа были выявлены некоторые гипотезы. Далее рассматриваются возможные подходы к их оценкам. 

Первая поставленная гипотеза заключалась во фразеологичности выражений. В целом, она подтверждается частотой, с которой встречаются некоторые выражения. Но для того, чтобы убедиться в правильности вывода, можно провести определенные тесты. 

H0: Есть транслитерированные выражения, которые повторяются в онлайн-пространствах чаще, чем можно считать случайным.
H1: Нет транслитерированных выражений, которые повторяются в онлайн-пространствах чаще, чем можно считать случайным

Для наглядности на графике отображены частоты, с которыми встречаются определенные транслитерированные выражения.
На графике можно заметить, что выражения представляют собой логарифмическое распределение. Большая часть выражений представлена в единичном экземпляре, 18 выражений встречаются более 10 раз и 9 выражений встречаются больше 20 раз.

```{r}
barplot(sort(freq, decreasing = TRUE))
```
```{r}
boxplot(freq)
```
На графике "ящик с усами" можно заметить, что в данных представлено много выбросов из общего распределения. Из 315 выражений 42 превысили это значение. Можно предположить, что эти 42 выражения появляются чаще, чем ожидается. Лингвистически это можно интерпретировать как фрезологичность этих выражений. 

Интересно попробовать смоделировать частоту появляения выражения на основе вероятности появляения той или иной части речи в каждой позиции до и после транслитерированного выражения. 

Создадим дамми-переменную для каждой части речи в каждой позиции, подсчитаем веряотности их появления и присоединим к получившемуся датасету частоты появления каждого транслитерированног выражения. Таким образом получим датасет, имеющий 99 столбцов. Важно учесть, что довольно часто вероятности равняются 0, что скорее всего связано с небольшим объемом данных, но может объясняться и характером появляения конкретного транслитерированного выражения.

```{r}
library(dplyr)
library(fastDummies)
data_dumm <- data %>% 
   mutate_all(~replace(., is.na(.), 0))
data_dumm <- subset(data_dumm, select = -c(1) )
data_dumm <- subset(fastDummies::dummy_cols(data_dumm, select_columns = c("pos_bef1", "pos_bef2", "pos_bef3", "pos_aft1", "pos_aft2", "pos_aft3")),
select = -c(2, 3, 4, 5, 6, 7))

#data_dumm <- replace(data_dumm, is.na(data_dumm), 0)

data_dumm <- data_dumm %>% 
group_by(translit) %>%
summarise(across(everything(), mean))
data_dumm <- data_dumm[-c(1, 2, 3, 4), ]

freq_df = as.data.frame(sort(prop.table(freq), decreasing = TRUE))
names(freq_df)[names(freq_df) == 'Var1'] <- 'translit'
data_dumm <- merge(x = data_dumm, y = freq_df, by = "translit", all.x = TRUE)
data_dumm
```

```{r}
test <- glm(Freq ~ ., family = binomial(), data = subset(data_dumm, select = -c(1)))
summary(test)
```

Интересно заметить, что все p-value < 0.05, то есть все коэффициенты статистически не значимы. Это можно инетерпретировать как то, что появляение частей в разных позициях до и после транслитерированного выражения не влияет на частоту появления этого выражения.

Следующая упомянутая гипотеза:
H0: Транслитерированные выражения статистически значимо чаще появляются в конце фразы.
H1: Транслитерированные выражения статистически значимо  чаще появляются в начале или середине фразы.

Для начала оценим, как часто транслитерированные выражения появляются в конце фразы и как часто в начале или середине. Из графика можно заметить, что они появляются в конце немного чаще. Оценим относительные частоты. Транслитерированные выражения действительно появляются в конце фразы чаще, при этом разница в вероятностях составляет около 3%.

```{r}
phrase_data$is_end <- ifelse(is.na(phrase_data$pos_aft1) & is.na(phrase_data$pos_aft2) & is.na(phrase_data$pos_aft3), 1, 0)
barplot(table(phrase_data$is_end))
prop.table(table(phrase_data$is_end))
```
Следующая гипотеза:
H0: Транслитерированные выражения из нескольких слов с одинаковой вероятностью могут стоять в начале предложения или после существительного.
H1: Транслитерированные выражения из нескольких слов с меньшей вероятностью могут стоять в начале предложения, чем после существительного.

Визуализируем данные для данной гипотезы. Визуально можно заметить, что два распределения схожи. Используем тест Колмогорова-Смирнова для того, чтобы убедиться в этом.

```{r}
phrase_data$is_start <- ifelse(is.na(phrase_data$pos_bef1), 1, 0)

phrase_data$is_after_noun <- ifelse((phrase_data$pos_bef1 == 'NOUN'), 1, 0)

barplot(table(phrase_data$is_start))
barplot(table(phrase_data$is_after_noun))

```

```{r}
ks.test(phrase_data$is_start, phrase_data$is_after_noun)
```
Так как p-value > 0.05 нулевая гипотеза принимается, то есть распределения появляения транслитерированных выражений в начале и после существительных схожи.

**Выводы**

Все раннее заявленные гипотезы были подвтерждены. То есть, транслитерированные выражения фразеологичны, чаще стоят в конце фраз и одинаково часто стоят в начале или после имен существительных. 

Для оценки данных рассматриваемых гипотез часто был достаточным визуальный и количественный анализ, ввиду простоты рассматриваемых данных. Различные методы визуального отображения позволяют обратить внимание на разные характеристики данных. Так, гистограмма позволила увидеть распределение частот транслитерированных выражений, а ящик с ума более наглядно показал большое число выбросов. 

Для проверки последней гипотезы использовалось два метода: визуальный анализ и тест Колмогорова-Смирнова. По отдельности оба метода не являются достаточно показательными, но вместе они позволяют и оценить гипотезу визуально, и подтвердить ее статистически.

Более сложным оказался подбор методов для оценки второй гипотезы. Сложность заключалась в простоте имеющихся данных и недостатке негативных данных. Ввиду данных ограничений не представлялось возможным доказать гипотезу иначе как сравнив значения вероятностей и визуально оценив распределение.

Другой проведенный анализ состоял в оценки влияния нахождения всех частей речи в разных позициях до и после транслитерированного выражения на частоту появления выражения. Путем построения логистической регрессии было выявлено, что влияния как такового нет.

Другие работы о транслитерации рассматривают различные явления, многие из них посвящены переводу. Также есть статья, исследующая влияние транслитерации на читаемость[1].
Не удалось найти исследования, имеющие те же цели, что и данное, поэтому сравнение результатов не представляется возможным.
Тем не менее, существуют схожие исследования, касающиеся других лингвистических явлений, например сленга[2]. В исследовании проводится статистический анализ использования сленгов в речи школьников, основанный на данных анкетирования школьников. 


**Список литературы:**

1. Sambhav Jain, Kunal Sachdeva & Ankush Soni, Effect of Transliteration on Readability, 2013, URL: https://link.springer.com/chapter/10.1007/978-3-642-39360-0_6

2. Попелышко Владислава, Употребление сленга в речи школьников и способы его искоренения, 2017, URL: https://nsportal.ru/ap/library/drugoe/2017/02/26/nauchnaya-rabota-upotreblenie-slenga-v-rechi-shkolnikov-i-sposoby-ego